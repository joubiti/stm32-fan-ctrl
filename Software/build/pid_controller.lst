ARM GAS  /tmp/ccQFIRIS.s 			page 1


   1              		.cpu cortex-m0plus
   2              		.arch armv6s-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 0
  12              		.eabi_attribute 18, 4
  13              		.file	"pid_controller.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/pid_controller.c"
  18              		.section	.text.pid_controller_init,"ax",%progbits
  19              		.align	1
  20              		.global	pid_controller_init
  21              		.syntax unified
  22              		.code	16
  23              		.thumb_func
  25              	pid_controller_init:
  26              	.LVL0:
  27              	.LFB0:
   1:Core/Src/pid_controller.c **** /**
   2:Core/Src/pid_controller.c ****  * @file pid_controller.c
   3:Core/Src/pid_controller.c ****  * @author your name (you@domain.com)
   4:Core/Src/pid_controller.c ****  * @brief 
   5:Core/Src/pid_controller.c ****  * @version 0.1
   6:Core/Src/pid_controller.c ****  * @date 2025-09-13
   7:Core/Src/pid_controller.c ****  * 
   8:Core/Src/pid_controller.c ****  * @copyright Copyright (c) 2025
   9:Core/Src/pid_controller.c ****  * 
  10:Core/Src/pid_controller.c ****  */
  11:Core/Src/pid_controller.c **** 
  12:Core/Src/pid_controller.c **** 
  13:Core/Src/pid_controller.c **** #include "pid_controller.h"
  14:Core/Src/pid_controller.c **** 
  15:Core/Src/pid_controller.c **** void pid_controller_init(pid_controller_t* pid, float Kp, float Ki, float Kd, uint32_t period_ms)
  16:Core/Src/pid_controller.c **** {
  28              		.loc 1 16 1 view -0
  29              		.cfi_startproc
  30              		@ args = 4, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 16 1 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 0400     		movs	r4, r0
  17:Core/Src/pid_controller.c ****     pid->period = period_ms;
  39              		.loc 1 17 5 is_stmt 1 view .LVU2
  40              		.loc 1 17 17 is_stmt 0 view .LVU3
  41 0004 0298     		ldr	r0, [sp, #8]
ARM GAS  /tmp/ccQFIRIS.s 			page 2


  42              	.LVL1:
  43              		.loc 1 17 17 view .LVU4
  44 0006 E061     		str	r0, [r4, #28]
  18:Core/Src/pid_controller.c ****     pid->Kp = Kp;
  45              		.loc 1 18 5 is_stmt 1 view .LVU5
  46              		.loc 1 18 13 is_stmt 0 view .LVU6
  47 0008 2160     		str	r1, [r4]
  19:Core/Src/pid_controller.c ****     pid->Ki = Ki;
  48              		.loc 1 19 5 is_stmt 1 view .LVU7
  49              		.loc 1 19 13 is_stmt 0 view .LVU8
  50 000a 6260     		str	r2, [r4, #4]
  20:Core/Src/pid_controller.c ****     pid->Kd = Kd;
  51              		.loc 1 20 5 is_stmt 1 view .LVU9
  52              		.loc 1 20 13 is_stmt 0 view .LVU10
  53 000c A360     		str	r3, [r4, #8]
  21:Core/Src/pid_controller.c ****     pid->dt = (pid->period/1000.0f);
  54              		.loc 1 21 5 is_stmt 1 view .LVU11
  55              		.loc 1 21 27 is_stmt 0 view .LVU12
  56 000e FFF7FEFF 		bl	__aeabi_ui2f
  57              	.LVL2:
  58              		.loc 1 21 27 view .LVU13
  59 0012 0449     		ldr	r1, .L2
  60 0014 FFF7FEFF 		bl	__aeabi_fdiv
  61              	.LVL3:
  62              		.loc 1 21 13 view .LVU14
  63 0018 A061     		str	r0, [r4, #24]
  22:Core/Src/pid_controller.c ****     pid->last_execution = 0;
  64              		.loc 1 22 5 is_stmt 1 view .LVU15
  65              		.loc 1 22 25 is_stmt 0 view .LVU16
  66 001a 0023     		movs	r3, #0
  67 001c E360     		str	r3, [r4, #12]
  23:Core/Src/pid_controller.c ****     pid->last_err = 0;
  68              		.loc 1 23 5 is_stmt 1 view .LVU17
  69              		.loc 1 23 19 is_stmt 0 view .LVU18
  70 001e 2361     		str	r3, [r4, #16]
  24:Core/Src/pid_controller.c **** }
  71              		.loc 1 24 1 view .LVU19
  72              		@ sp needed
  73              	.LVL4:
  74              		.loc 1 24 1 view .LVU20
  75 0020 10BD     		pop	{r4, pc}
  76              	.L3:
  77 0022 C046     		.align	2
  78              	.L2:
  79 0024 00007A44 		.word	1148846080
  80              		.cfi_endproc
  81              	.LFE0:
  83              		.section	.text.pid_controller_step,"ax",%progbits
  84              		.align	1
  85              		.global	pid_controller_step
  86              		.syntax unified
  87              		.code	16
  88              		.thumb_func
  90              	pid_controller_step:
  91              	.LVL5:
  92              	.LFB1:
  25:Core/Src/pid_controller.c **** 
ARM GAS  /tmp/ccQFIRIS.s 			page 3


  26:Core/Src/pid_controller.c **** 
  27:Core/Src/pid_controller.c **** uint8_t pid_controller_step(pid_controller_t* pid, uint32_t measure, uint32_t target, uint32_t curr
  28:Core/Src/pid_controller.c **** {
  93              		.loc 1 28 1 is_stmt 1 view -0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 0
  96              		@ frame_needed = 0, uses_anonymous_args = 0
  97              		.loc 1 28 1 is_stmt 0 view .LVU22
  98 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  99              	.LCFI1:
 100              		.cfi_def_cfa_offset 24
 101              		.cfi_offset 3, -24
 102              		.cfi_offset 4, -20
 103              		.cfi_offset 5, -16
 104              		.cfi_offset 6, -12
 105              		.cfi_offset 7, -8
 106              		.cfi_offset 14, -4
 107 0002 CE46     		mov	lr, r9
 108 0004 4746     		mov	r7, r8
 109 0006 80B5     		push	{r7, lr}
 110              	.LCFI2:
 111              		.cfi_def_cfa_offset 32
 112              		.cfi_offset 8, -32
 113              		.cfi_offset 9, -28
 114 0008 0400     		movs	r4, r0
 115 000a 1E00     		movs	r6, r3
  29:Core/Src/pid_controller.c ****     if(current_tick - pid->last_execution >= pid->period)
 116              		.loc 1 29 5 is_stmt 1 view .LVU23
 117              		.loc 1 29 26 is_stmt 0 view .LVU24
 118 000c C368     		ldr	r3, [r0, #12]
 119              	.LVL6:
 120              		.loc 1 29 21 view .LVU25
 121 000e F31A     		subs	r3, r6, r3
 122              		.loc 1 29 49 view .LVU26
 123 0010 C069     		ldr	r0, [r0, #28]
 124              	.LVL7:
 125              		.loc 1 29 7 view .LVU27
 126 0012 8342     		cmp	r3, r0
 127 0014 57D3     		bcc	.L11
 128              	.LBB2:
  30:Core/Src/pid_controller.c ****     {
  31:Core/Src/pid_controller.c ****         // PID is: Kp * e + Ki * integral(e) * dt + Kd * derivative(e)/dt
  32:Core/Src/pid_controller.c ****         // In discrete time, integral(e) can be accumulation of past samples, derivate can be diffe
  33:Core/Src/pid_controller.c ****         int32_t err = target - measure;
 129              		.loc 1 33 9 is_stmt 1 view .LVU28
 130              		.loc 1 33 30 is_stmt 0 view .LVU29
 131 0016 551A     		subs	r5, r2, r1
 132              	.LVL8:
  34:Core/Src/pid_controller.c ****         // Proportional term
  35:Core/Src/pid_controller.c ****         float P = pid->Kp * err;
 133              		.loc 1 35 9 is_stmt 1 view .LVU30
 134              		.loc 1 35 22 is_stmt 0 view .LVU31
 135 0018 2368     		ldr	r3, [r4]
 136 001a 9846     		mov	r8, r3
 137              		.loc 1 35 27 view .LVU32
 138 001c 2800     		movs	r0, r5
 139 001e FFF7FEFF 		bl	__aeabi_i2f
ARM GAS  /tmp/ccQFIRIS.s 			page 4


 140              	.LVL9:
 141              		.loc 1 35 27 view .LVU33
 142 0022 071C     		adds	r7, r0, #0
 143              		.loc 1 35 15 view .LVU34
 144 0024 011C     		adds	r1, r0, #0
 145 0026 4046     		mov	r0, r8
 146 0028 FFF7FEFF 		bl	__aeabi_fmul
 147              	.LVL10:
 148 002c 8046     		mov	r8, r0
 149              	.LVL11:
  36:Core/Src/pid_controller.c ****         // Integral term
  37:Core/Src/pid_controller.c ****         pid->integral += err * pid->Ki * pid->dt;
 150              		.loc 1 37 9 is_stmt 1 view .LVU35
 151              		.loc 1 37 12 is_stmt 0 view .LVU36
 152 002e 6369     		ldr	r3, [r4, #20]
 153 0030 9946     		mov	r9, r3
 154              		.loc 1 37 35 view .LVU37
 155 0032 6168     		ldr	r1, [r4, #4]
 156              		.loc 1 37 30 view .LVU38
 157 0034 381C     		adds	r0, r7, #0
 158              	.LVL12:
 159              		.loc 1 37 30 view .LVU39
 160 0036 FFF7FEFF 		bl	__aeabi_fmul
 161              	.LVL13:
 162              		.loc 1 37 45 view .LVU40
 163 003a A769     		ldr	r7, [r4, #24]
 164              		.loc 1 37 40 view .LVU41
 165 003c 391C     		adds	r1, r7, #0
 166 003e FFF7FEFF 		bl	__aeabi_fmul
 167              	.LVL14:
 168 0042 011C     		adds	r1, r0, #0
 169              		.loc 1 37 23 view .LVU42
 170 0044 4846     		mov	r0, r9
 171 0046 FFF7FEFF 		bl	__aeabi_fadd
 172              	.LVL15:
 173 004a 6061     		str	r0, [r4, #20]
  38:Core/Src/pid_controller.c ****         // Anti-windup clamp
  39:Core/Src/pid_controller.c ****         if (pid->integral > 100.0f) pid->integral = 100.0f;
 174              		.loc 1 39 9 is_stmt 1 view .LVU43
 175              		.loc 1 39 12 is_stmt 0 view .LVU44
 176 004c 1F49     		ldr	r1, .L17
 177 004e FFF7FEFF 		bl	__aeabi_fcmpgt
 178              	.LVL16:
 179 0052 0028     		cmp	r0, #0
 180 0054 01D0     		beq	.L6
 181              		.loc 1 39 37 is_stmt 1 discriminator 1 view .LVU45
 182              		.loc 1 39 51 is_stmt 0 discriminator 1 view .LVU46
 183 0056 1D4B     		ldr	r3, .L17
 184 0058 6361     		str	r3, [r4, #20]
 185              	.L6:
  40:Core/Src/pid_controller.c ****         if (pid->integral < 0.0f) pid->integral = 0.0f;
 186              		.loc 1 40 9 is_stmt 1 view .LVU47
 187              		.loc 1 40 16 is_stmt 0 view .LVU48
 188 005a 6069     		ldr	r0, [r4, #20]
 189              		.loc 1 40 12 view .LVU49
 190 005c 0021     		movs	r1, #0
 191 005e FFF7FEFF 		bl	__aeabi_fcmplt
ARM GAS  /tmp/ccQFIRIS.s 			page 5


 192              	.LVL17:
 193 0062 0028     		cmp	r0, #0
 194 0064 21D1     		bne	.L16
 195              	.L8:
  41:Core/Src/pid_controller.c ****         // Derivative term
  42:Core/Src/pid_controller.c ****         float D = pid->Kd * (err - pid->last_err)/pid->dt;
 196              		.loc 1 42 9 is_stmt 1 view .LVU50
 197              		.loc 1 42 22 is_stmt 0 view .LVU51
 198 0066 A368     		ldr	r3, [r4, #8]
 199 0068 9946     		mov	r9, r3
 200              		.loc 1 42 39 view .LVU52
 201 006a 2069     		ldr	r0, [r4, #16]
 202              		.loc 1 42 34 view .LVU53
 203 006c 281A     		subs	r0, r5, r0
 204              		.loc 1 42 27 view .LVU54
 205 006e FFF7FEFF 		bl	__aeabi_i2f
 206              	.LVL18:
 207 0072 4946     		mov	r1, r9
 208 0074 FFF7FEFF 		bl	__aeabi_fmul
 209              	.LVL19:
 210              		.loc 1 42 15 view .LVU55
 211 0078 391C     		adds	r1, r7, #0
 212 007a FFF7FEFF 		bl	__aeabi_fdiv
 213              	.LVL20:
 214 007e 071C     		adds	r7, r0, #0
 215              	.LVL21:
  43:Core/Src/pid_controller.c **** 
  44:Core/Src/pid_controller.c ****         float output = P + pid->integral + D;
 216              		.loc 1 44 9 is_stmt 1 view .LVU56
 217              		.loc 1 44 31 is_stmt 0 view .LVU57
 218 0080 6069     		ldr	r0, [r4, #20]
 219              	.LVL22:
 220              		.loc 1 44 26 view .LVU58
 221 0082 4146     		mov	r1, r8
 222 0084 FFF7FEFF 		bl	__aeabi_fadd
 223              	.LVL23:
 224              		.loc 1 44 15 view .LVU59
 225 0088 391C     		adds	r1, r7, #0
 226 008a FFF7FEFF 		bl	__aeabi_fadd
 227              	.LVL24:
 228 008e 071C     		adds	r7, r0, #0
 229              	.LVL25:
  45:Core/Src/pid_controller.c ****         // Clamp output to 0–100% duty cycle
  46:Core/Src/pid_controller.c ****         if (output > 100.0f) output = 100.0f;
 230              		.loc 1 46 9 is_stmt 1 view .LVU60
 231              		.loc 1 46 12 is_stmt 0 view .LVU61
 232 0090 0E49     		ldr	r1, .L17
 233 0092 FFF7FEFF 		bl	__aeabi_fcmpgt
 234              	.LVL26:
 235              		.loc 1 46 12 view .LVU62
 236 0096 0028     		cmp	r0, #0
 237 0098 0AD1     		bne	.L12
  47:Core/Src/pid_controller.c ****         if (output < 0.0f) output = 0.0f;
 238              		.loc 1 47 9 is_stmt 1 view .LVU63
 239              		.loc 1 47 12 is_stmt 0 view .LVU64
 240 009a 0021     		movs	r1, #0
 241 009c 381C     		adds	r0, r7, #0
ARM GAS  /tmp/ccQFIRIS.s 			page 6


 242 009e FFF7FEFF 		bl	__aeabi_fcmplt
 243              	.LVL27:
 244 00a2 0028     		cmp	r0, #0
 245 00a4 05D0     		beq	.L10
 246              		.loc 1 47 35 discriminator 1 view .LVU65
 247 00a6 0027     		movs	r7, #0
 248              	.LVL28:
 249              		.loc 1 47 35 discriminator 1 view .LVU66
 250 00a8 03E0     		b	.L10
 251              	.LVL29:
 252              	.L16:
  40:Core/Src/pid_controller.c ****         // Derivative term
 253              		.loc 1 40 35 is_stmt 1 discriminator 1 view .LVU67
  40:Core/Src/pid_controller.c ****         // Derivative term
 254              		.loc 1 40 49 is_stmt 0 discriminator 1 view .LVU68
 255 00aa 0023     		movs	r3, #0
 256 00ac 6361     		str	r3, [r4, #20]
 257 00ae DAE7     		b	.L8
 258              	.LVL30:
 259              	.L12:
  46:Core/Src/pid_controller.c ****         if (output < 0.0f) output = 0.0f;
 260              		.loc 1 46 37 discriminator 1 view .LVU69
 261 00b0 064F     		ldr	r7, .L17
 262              	.LVL31:
 263              	.L10:
  48:Core/Src/pid_controller.c **** 
  49:Core/Src/pid_controller.c ****         pid->last_err = err;
 264              		.loc 1 49 9 is_stmt 1 view .LVU70
 265              		.loc 1 49 23 is_stmt 0 view .LVU71
 266 00b2 2561     		str	r5, [r4, #16]
  50:Core/Src/pid_controller.c ****         pid->last_execution = current_tick;
 267              		.loc 1 50 9 is_stmt 1 view .LVU72
 268              		.loc 1 50 29 is_stmt 0 view .LVU73
 269 00b4 E660     		str	r6, [r4, #12]
  51:Core/Src/pid_controller.c **** 
  52:Core/Src/pid_controller.c ****         return (uint8_t)output;
 270              		.loc 1 52 9 is_stmt 1 view .LVU74
 271              		.loc 1 52 16 is_stmt 0 view .LVU75
 272 00b6 381C     		adds	r0, r7, #0
 273 00b8 FFF7FEFF 		bl	__aeabi_f2uiz
 274              	.LVL32:
 275 00bc C0B2     		uxtb	r0, r0
 276              	.LVL33:
 277              	.L5:
 278              		.loc 1 52 16 view .LVU76
 279              	.LBE2:
  53:Core/Src/pid_controller.c ****     }
  54:Core/Src/pid_controller.c ****     else
  55:Core/Src/pid_controller.c ****         return PID_NO_UPDATE;
  56:Core/Src/pid_controller.c **** }...
 280              		.loc 1 56 1 view .LVU77
 281              		@ sp needed
 282              	.LVL34:
 283              	.LVL35:
 284              		.loc 1 56 1 view .LVU78
 285 00be C0BC     		pop	{r6, r7}
 286 00c0 B946     		mov	r9, r7
ARM GAS  /tmp/ccQFIRIS.s 			page 7


 287 00c2 B046     		mov	r8, r6
 288 00c4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 289              	.LVL36:
 290              	.L11:
  55:Core/Src/pid_controller.c ****         return PID_NO_UPDATE;
 291              		.loc 1 55 16 view .LVU79
 292 00c6 FF20     		movs	r0, #255
 293 00c8 F9E7     		b	.L5
 294              	.L18:
 295 00ca C046     		.align	2
 296              	.L17:
 297 00cc 0000C842 		.word	1120403456
 298              		.cfi_endproc
 299              	.LFE1:
 301              		.text
 302              	.Letext0:
 303              		.file 2 "/home/achraf/Desktop/Toolchain/arm-gnu-toolchain-14.3.rel1-x86_64-arm-none-eabi/arm-none-
 304              		.file 3 "/home/achraf/Desktop/Toolchain/arm-gnu-toolchain-14.3.rel1-x86_64-arm-none-eabi/arm-none-
 305              		.file 4 "Core/Inc/pid_controller.h"
ARM GAS  /tmp/ccQFIRIS.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 pid_controller.c
     /tmp/ccQFIRIS.s:19     .text.pid_controller_init:00000000 $t
     /tmp/ccQFIRIS.s:25     .text.pid_controller_init:00000000 pid_controller_init
     /tmp/ccQFIRIS.s:79     .text.pid_controller_init:00000024 $d
     /tmp/ccQFIRIS.s:84     .text.pid_controller_step:00000000 $t
     /tmp/ccQFIRIS.s:90     .text.pid_controller_step:00000000 pid_controller_step
     /tmp/ccQFIRIS.s:297    .text.pid_controller_step:000000cc $d

UNDEFINED SYMBOLS
__aeabi_ui2f
__aeabi_fdiv
__aeabi_i2f
__aeabi_fmul
__aeabi_fadd
__aeabi_fcmpgt
__aeabi_fcmplt
__aeabi_f2uiz
